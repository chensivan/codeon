<div id="theList" ng-controller='ResponsePanelController' class="codeon_panel wrapper">
	<h1 class="title" ng-click="titleClick(title)">
		<span ng-show="selectedObj && responseContent" class="mega-icon icon-chevron-left"></span>
		<button class="mega-icon icon-chevron-right"></button>
		<span class="title-text">{{selectedObj.request || title}}</span>
	</h1>

	<div class="content-wrapper" >
		<div ng-show="resList" class="request-list">
			<div ng-hide='request.remove' ng-class='request.status.state' class="request-item" ng-class-odd = "'odd'" ng-repeat="request in requests" id="{{request.id}}" ng-click="clickRequest(request)">
				<!-- <h2 class='transcript'>Title: {{request.title }} </h2> -->
				<p class='transcript'>Transcription: {{request.transcript }} </p>
					<div>
						<span class='state'>({{request.notification}})</span>
						<span am-time-ago="request.updated"/>
					</div>
					<div class="request-buttons">
						<button ng-click="playRequest(request); $event.stopPropagation();" class="btn btn-default">
							<span ng-if="!request.playing">
								Play Request
							</span>
							<span ng-if="request.playing">
								Stop
							</span>
						</button>
						<button class="btn btn-default" ng-show='request.removeButton' ng-click="hideRequest(request); $event.stopPropagation();">Remove</button>
				 </div>
				</div>

			</div>

			<button class = "btn btn-default" ng-show="resList" id="makeRequest" ng-click="newRequest()"><h2>Make a request</h2></button>


			<div ng-show="selectedObj && responseContent" ng-controller='RequestController' class="request-content">

				<div class='request-info'>
					<!-- <h2 class='transcript'>Title: {{selectedObj.title }} </h2> -->
					<!-- <input ng-model="inputs.editedTitle" ng-show="selectedObj.editTitle" class = "native-key-bindings form-control" tabindex="-1"></input> -->
					<!-- <textarea type="text" ng-model="inputs.iterationMsg" /> -->
					<!-- <button class = "btn btn-default" ng-hide="selectedObj.editTitle" ng-click="editTitle(selectedObj)">Edit Title</button>
					<button class = "btn btn-default" ng-show="selectedObj.editTitle" ng-click="changeTitle(inputs.editedTitle, selectedObj)">Done</button>
					<button class = "btn btn-default" ng-show="selectedObj.editTitle" ng-click="cancelTitle(selectedObj)">Cancel</button> -->

					<p class='transcript'>Transcription: {{selectedObj.transcript }} </p>
					<input ng-model="inputs.editedRequest" ng-show="selectedObj.edit" class = "native-key-bindings form-control" tabindex="-1" autofocus></input>
					<!-- <textarea type="text" ng-model="inputs.iterationMsg" /> -->
					<button class = "btn btn-default" ng-hide="selectedObj.edit" ng-click="editRequest(selectedObj)">Edit Transcript</button>
					<button class = "btn btn-default" ng-show="selectedObj.edit" ng-click="changeRequest(inputs.editedRequest, selectedObj)" ng-disabled="!inputs.editedRequest">Done</button>
					<button class = "btn btn-default" ng-show="selectedObj.edit" ng-click="cancelRequest(selectedObj)">Cancel</button>

					<div am-time-ago="selectedObj.updated" />
					<button class = "btn btn-default" ng-click="playRequest(selectedObj); $event.stopPropagation();" class="btn btn-default">
						<span ng-if="!selectedObj.playing">
							Play Request
						</span>
						<span ng-if="selectedObj.playing">
							Stop
						</span>
					</button>
						<!-- <span ng-class='"status " + selectedObj.status.state'>({{selectedObj.notification}})</span> -->
					</div>


					<h6 ng-show="selectedObj.status.responses==0">(Currently there is no response)</h6>
					<!-- details of one response  -->
					<div ng-controller='HelperResponse' class="response"  ng-repeat="helper_response in selectedObj.status.responses">

						<!-- add collapse div here -->
						<a href="#" ng-click="collapse(helper_response)">Click to view response. (received <span am-time-ago="helper_response.timestamp"></span>)</a>

						<div ng-show="helper_response.collapse">
							<!-- display each answer in the response -->
							<div ng-repeat="answer in helper_response.answers" ng-show="answer.type">
								<div ng-show='answer.type!=="livewriting_logs" && answer.type!=="inlinecode"' class='response-type'>{{answer.type}}</div>
								<div ng-show='answer.type!=="livewriting_logs" && answer.type==="inlinecode"' class='response-type'>
									{{answer.type}} in {{mySplit(answer)}}
								</div>

								<p ng-show='(answer.type==="livewriting_logs") && (answer.type!=="inlinecode")&& (answer.type!=="voice")' class='response-content'>{{answer.value}}</p>
								<a href="#" ng-click = 'playVoice(answer)' ng-show='(answer.type==="voice")  ' class='response-content'>
									Click to play voice annotation {{answer.id}} </a><a href="#" ng-click = 'playVoice(answer)' ng-show="isVoicePlaying">Click to stop. </a>

								<p ng-class='"merge"' ng-show='answer.mergeConflict'>There is a merge conflict with this answer. Please resolve it by yourself!</p>
								<button class = "btn btn-default"  ng-show="answer.type==='annotation'" ng-click="annotationResponse(answer)">Show me!</button>

								<!-- <button class = "btn btn-default"  ng-show="answer.type==='inlinecode'" ng-click="inlineCodeResponse(answer)">
									<span ng-hide="location === 'responseList'" class="icon icon-git-merge"></span>
									{{answer.showMerge}}
								</button> -->

								<form ng-show="answer.type==='inlinecode'">
									<label>
								    <input type="radio" ng-model="values" ng-click="helperVersion(answer)" value="helper">
								    View helper's code response
								  </label><br/>
								  <label>
								    <input type="radio" ng-model="values" ng-click="myVersion(answer)" value="my">
								    View my current code
								  </label><br/>
								  <label>
								    <input type="radio" ng-model="values" ng-click="githubVersion(answer)" value="both">
								    Show github like code difference
								  </label><br/>
							 </form>

								<!-- <button class="btn response-button" ng-show="response.type==='inlinecode'" ng-click="merge(selectedObj)">

									<span ng-hide="location === 'responseList'" class="icon icon-git-merge"></span>
									Merge
								</button> -->

								<div  class="sub-response" ng-repeat="helper_response in selectedObj.status.responses"
								 ng-style="{'background' : bgColor }">
									<div class='response' ng-repeat="answer in helper_response.answers" ng-show="answer.type" ng-if="answer.type!='livewriting_logs'">
									</div>
								</div>
							</div>

							<!-- accept, reject and replay buttons -->


							<button class="btn response-button" ng-show="hasReplay" ng-click="replay(helper_response,response_hash_key)">
								<span ng-hide="location === 'responseList'" class="icon icon-triangle-right"></span>
								Code Replay
							</button>
							<hr style="height:5px; background-color: red">
							<!-- replay feature -->
							<!--
						<div ng-show="showSlider(response_hash_key)">
								<div class = 'livewriting_navbar'>
									<div id="lw_toolbar{{response_hash_key}}" class="livewriting_navbar_buttons">
										<button id="lw_toolbar_beginning{{response_hash_key}}" class = "lw_toolbar_button">go to beginning</button>
										<button id="lw_toolbar_slower{{response_hash_key}}" class = "lw_toolbar_button">slower</button>
										<button id="lw_toolbar_play{{response_hash_key}}" class = "lw_toolbar_button">pause</button>
										<button id="lw_toolbar_faster{{response_hash_key}}" class = "lw_toolbar_button">faster</button>
										<button id="lw_toolbar_end{{response_hash_key}}" class = "lw_toolbar_button">go to end</button>
										<span id="livewriting_speed{{response_hash_key}}">1</span>&nbsp;X
									</div>
									<div class='livewriting_slider_wrapper'>
										<div id = 'livewriting_slider{{response_hash_key}}' class = 'livewriting_slider'></div>
									</div>
								</div>
							</div>

							<hr>

					  </div>
-->
				  	</div>
					</div>

					<div class='discussion'>
						<!-- <h2 ng-show='selectedObj.status.discussion.length>0'>Discussion</h2> -->
						<h2>Comments/Feedback from helpers:</h2>
						<hr>
						<div class='row' ng-repeat='iterationRequest in selectedObj.status.discussion'>
							<div class='col-sm-12'>
								{{iterationRequest.sender}} : {{iterationRequest.value}} (<span am-time-ago="iterationRequest.timestamp"></span>)
							</div>
						</div>
<!--
						<button class="btn response-button" ng-show="selectedObj" ng-click="nah()">
							<span ng-hide="location === 'responseList'" class="icon icon-comment-discussion"></span>
							Comment
						</button> -->

						<!-- reject action -->

						<div class="reject-controls">
							<textarea ng-model="iterationMsg" class="form-control native-key-bindings" rows="1" tabIndex = -1  placeholder = "Respond to helper's comment..."/>
							<br />
							<button class="btn response-button" ng-click="iterate(iterationMsg)" ng-disabled="!iterationMsg">
								<span ng-hide="location === 'responseList'" class="icon icon-comment"></span>
								Submit
							</button>
						</div>

					</div>

			  </div>

	 		</div>

		</div>
	</div>
</div>
